-- Minimal Golden Noir GUI + CLEAN Golden Aura ability (final, per request)
-- Place this LocalScript in StarterPlayerScripts

local Players = game:GetService("Players")
local UserInputService = game:GetService("UserInputService")
local TweenService = game:GetService("TweenService")
local RunService = game:GetService("RunService")
local Workspace = game:GetService("Workspace")

local player = Players.LocalPlayer

local gui = Instance.new("ScreenGui")
gui.Name = "GoldAuraAbilities"
gui.ResetOnSpawn = false
gui.Parent = player:WaitForChild("PlayerGui")

-- MAIN FRAME
local frame = Instance.new("Frame")
frame.Size = UDim2.fromScale(0.25, 0.25)
frame.Position = UDim2.fromScale(0.37, 0.7)
frame.BackgroundColor3 = Color3.fromRGB(40, 40, 40)
frame.BackgroundTransparency = 0.3
frame.BorderSizePixel = 0
frame.Parent = gui
frame.Name = "MainFrame"

local caption = Instance.new("TextLabel")
caption.Size = UDim2.fromScale(1, 0.12)
caption.Position = UDim2.fromScale(0, 0)
caption.BackgroundTransparency = 1
caption.TextColor3 = Color3.fromRGB(255, 215, 0)
caption.TextScaled = true
caption.TextWrapped = true
caption.Text = "Golden Noir ready..."
caption.Parent = frame
caption.TextStrokeTransparency = 0.7
caption.TextTransparency = 1

local lastCaptionTime = 0
local fadeDelay = 0.6
local function showCaption(text)
    local currentTime = tick()
    if currentTime - lastCaptionTime < fadeDelay then return end
    lastCaptionTime = currentTime
    caption.Text = text or ""
    caption.TextTransparency = 1
    local fadeIn = TweenService:Create(caption, TweenInfo.new(0.25), {TextTransparency = 0})
    local fadeOut = TweenService:Create(caption, TweenInfo.new(0.7), {TextTransparency = 1})
    fadeIn:Play()
    fadeIn.Completed:Connect(function()
        task.wait(0.9)
        fadeOut:Play()
    end)
end

local toggleBtn = Instance.new("TextButton")
toggleBtn.Size = UDim2.fromScale(0.1, 0.1)
toggleBtn.Position = UDim2.fromScale(0.9, 0)
toggleBtn.Text = ">"
toggleBtn.TextScaled = true
toggleBtn.BackgroundTransparency = 0.5
toggleBtn.BackgroundColor3 = Color3.fromRGB(80, 80, 80)
toggleBtn.TextColor3 = Color3.fromRGB(255, 215, 0)
toggleBtn.Parent = frame

local emojiBtn = Instance.new("TextButton")
emojiBtn.Size = UDim2.fromScale(0.08, 0.08)
emojiBtn.Position = UDim2.fromScale(0.95, 0.95)
emojiBtn.AnchorPoint = Vector2.new(1, 1)
emojiBtn.BackgroundTransparency = 1
emojiBtn.Text = "‚ú®Ô∏è"
emojiBtn.TextScaled = true
emojiBtn.TextColor3 = Color3.fromRGB(255, 215, 0)
emojiBtn.Visible = false
emojiBtn.Parent = gui

local abilityScrollFrame = Instance.new("ScrollingFrame")
abilityScrollFrame.Size = UDim2.fromScale(1, 0.92)
abilityScrollFrame.Position = UDim2.fromScale(0, 0.08)
abilityScrollFrame.CanvasSize = UDim2.new(0,0,0,0)
abilityScrollFrame.ScrollBarThickness = 6
abilityScrollFrame.BackgroundTransparency = 1
abilityScrollFrame.Parent = frame

local abilityLayout = Instance.new("UIListLayout")
abilityLayout.SortOrder = Enum.SortOrder.LayoutOrder
abilityLayout.Padding = UDim.new(0, 4)
abilityLayout.Parent = abilityScrollFrame

-- Core state
local auraActive = false
local objectsPresent = false

local worldParts = {}
local worldConns = {}
local uiParts = {}

local orbSpeed = 0.18
local orbsVisible = true
local fireEnabled = true
local orbColor = Color3.fromRGB(255,220,130)
local orbBrightness = 1.2 -- orb light brightness
local fireColor = Color3.fromRGB(255,200,100)
local fireSaturation = 100
local fireSize = 6
local fireHeat = 6
local auraEnabled = true
local auraColor = Color3.fromRGB(255,215,0)

local rainbowConn, fireRainbowConn, auraRainbowConn

local function trackWorld(inst) if inst then table.insert(worldParts, inst) end end
local function trackWorldConn(conn) if conn then table.insert(worldConns, conn) end end
local function trackUI(inst) if inst then table.insert(uiParts, inst) end end

local function clearWorld()
    for _, c in ipairs(worldConns) do pcall(function() if c and c.Disconnect then c:Disconnect() end end) end
    worldConns = {}
    for _, p in ipairs(worldParts) do pcall(function() if p and p.Parent then p:Destroy() end end) end
    worldParts = {}
    objectsPresent = false
end
local function clearUI()
    for _, u in ipairs(uiParts) do pcall(function() if u and u.Parent then u:Destroy() end end) end
    uiParts = {}
end

local function removeWorkspaceOrbs()
    local name = "GoldenAuraOrbs_" .. tostring(player.UserId)
    local existing = Workspace:FindFirstChild(name)
    if existing then pcall(function() existing:Destroy() end) end
end

local function getOrbModel()
    return Workspace:FindFirstChild("GoldenAuraOrbs_" .. tostring(player.UserId))
end

local function getMainLight()
    if not player.Character then return nil end
    local root = player.Character:FindFirstChild("HumanoidRootPart") or player.Character:FindFirstChildWhichIsA("BasePart")
    if not root then return nil end
    local ml = root:FindFirstChild("GoldLight")
    return ml
end

local function applyOrbBrightness(orbModel, brightness)
    orbModel = orbModel or getOrbModel()
    if not orbModel then return end
    for _, p in ipairs(orbModel:GetDescendants()) do
        if p:IsA("PointLight") and p.Name == "OrbLight" then
            p.Brightness = brightness
        end
    end
end

local function applyFireSettingsToAll(orbModel, fcolor, fsat, fsize, fheat)
    orbModel = orbModel or getOrbModel()
    if not orbModel then return end
    local satNorm = math.clamp((fsat or fireSaturation)/100, 0, 1)
    for _, v in ipairs(orbModel:GetDescendants()) do
        if v:IsA("Fire") and v.Name == "GoldenFire" then
            local ok, h, s, vv = pcall(function() return Color3.toHSV(fcolor) end)
            if ok then
                local newV = math.clamp(vv, 0.55, 1)
                local newColor = Color3.fromHSV(h, satNorm * 0.95, newV)
                v.Color = newColor
                v.SecondaryColor = Color3.fromHSV(h, math.clamp(satNorm * 0.7,0,1), math.clamp(newV*0.95,0,1))
            else
                v.Color = fcolor
                v.SecondaryColor = fcolor
            end
            v.Enabled = (fireEnabled and true or false)
            v.Size = (fsize or fireSize)
            v.Heat = math.clamp((fheat or fireHeat), 1, 40)
        end
    end
end

local function applyOrbColor(orbModel, color)
    orbModel = orbModel or getOrbModel()
    if not orbModel then return end
    for _, p in ipairs(orbModel:GetChildren()) do
        if p:IsA("Part") and p.Name:match("^GoldenOrb_") then
            p.Color = color
            local pl = p:FindFirstChild("OrbLight")
            if pl and pl:IsA("PointLight") then
                pl.Color = color
                pl.Brightness = orbBrightness
                pl.Range = 18
            end
        end
    end
end

local function applyAuraSettingsToCharacter(char, color, enabled)
    if not char then return end
    for _, obj in ipairs(char:GetDescendants()) do
        if obj:IsA("Highlight") and tostring(obj.Name):match("^GoldenOutline_") then
            obj.OutlineColor = color or auraColor
            obj.FillColor = color or auraColor
            obj.OutlineTransparency = (enabled and 0 or 1)
            obj.FillTransparency = (enabled and obj.FillTransparency or 1)
        end
    end
    local root = char:FindFirstChild("HumanoidRootPart") or char:FindFirstChildWhichIsA("BasePart")
    if root then
        local mainLight = root:FindFirstChild("GoldLight")
        if mainLight and mainLight:IsA("PointLight") then
            mainLight.Color = color or auraColor
            mainLight.Brightness = (enabled and math.clamp(mainLight.Brightness, 0, 50) or 0)
        end
    end
end

-- Make main frame draggable by top area (unchanged)
local function makeDraggableTop(target)
    if not target then return end
    local dragging, dragInput, dragStart, startPos = false, nil, nil, nil
    target.InputBegan:Connect(function(input)
        if input.UserInputType ~= Enum.UserInputType.MouseButton1 and input.UserInputType ~= Enum.UserInputType.Touch then return end
        local absPos = target.AbsolutePosition or Vector2.new(0,0)
        local absSize = target.AbsoluteSize or Vector2.new(0,0)
        local localY = input.Position.Y - absPos.Y
        if localY < 0 or localY > math.max(40, absSize.Y * 0.12) then return end
        dragging = true
        dragStart = input.Position
        startPos = frame.Position
        input.Changed:Connect(function()
            if input.UserInputState == Enum.UserInputState.End then dragging = false end
        end)
    end)
    target.InputChanged:Connect(function(input)
        if input.UserInputType == Enum.UserInputType.MouseMovement or input.UserInputType == Enum.UserInputType.Touch then
            dragInput = input
        end
    end)
    local conn = RunService.RenderStepped:Connect(function()
        if dragging and dragInput and dragStart and startPos then
            local delta = UserInputService:GetMouseLocation() - dragStart
            local newPos = startPos + UDim2.new(0, delta.X, 0, delta.Y)
            frame.Position = UDim2.new(0, math.clamp(newPos.X.Offset, -50, math.max(Workspace.CurrentCamera.ViewportSize.X - frame.AbsoluteSize.X + 50, 0)), 0, math.clamp(newPos.Y.Offset, -50, math.max(Workspace.CurrentCamera.ViewportSize.Y - frame.AbsoluteSize.Y + 50, 0)))
        end
    end)
    trackUI(conn)
end

-- Create orbs (unchanged)
local function createOrbs(root)
    removeWorkspaceOrbs()
    local orbModel = Instance.new("Model")
    orbModel.Name = "GoldenAuraOrbs_" .. tostring(player.UserId)
    orbModel.Parent = Workspace
    trackWorld(orbModel)

    local visibleOrbs, fireOrbs, angles = {}, {}, {}
    for i = 0,5 do table.insert(angles, (i/6) * math.pi * 2) end

    for i, ang in ipairs(angles) do
        local orb = Instance.new("Part")
        orb.Name = "GoldenOrb_"..i
        orb.Size = Vector3.new(1.4,1.4,1.4)
        orb.Shape = Enum.PartType.Ball
        orb.Material = Enum.Material.Neon
        orb.Color = orbColor
        orb.Anchored = true
        orb.CanCollide = false
        orb.Parent = orbModel
        trackWorld(orb)

        local l = Instance.new("PointLight")
        l.Name = "OrbLight"
        l.Parent = orb
        l.Color = orb.Color
        l.Brightness = orbBrightness
        l.Range = 18
        l.Shadows = false
        trackWorld(l)

        table.insert(visibleOrbs, {part = orb, angle = ang, height = 3})
    end

    for i, ang in ipairs(angles) do
        local invOrb = Instance.new("Part")
        invOrb.Name = "FireOrb_"..i
        invOrb.Size = Vector3.new(1,1,1)
        invOrb.Transparency = 1
        invOrb.Anchored = true
        invOrb.CanCollide = false
        invOrb.Parent = orbModel
        trackWorld(invOrb)

        local fire = Instance.new("Fire")
        fire.Name = "GoldenFire"
        fire.Size = fireSize
        fire.Heat = math.clamp(fireHeat, 1, 40)
        local h, s, v = Color3.toHSV(fireColor)
        fire.Color = Color3.fromHSV(h, math.clamp(fireSaturation/100,0,1), v)
        fire.SecondaryColor = fire.Color
        fire.Enabled = fireEnabled
        fire.Parent = invOrb
        trackWorld(fire)

        table.insert(fireOrbs, {part = invOrb, angle = ang, height = 3})
    end

    return orbModel, visibleOrbs, fireOrbs
end

function createAuraForCharacter(char)
    clearWorld()
    if not char then return end
    local root = char:FindFirstChild("HumanoidRootPart") or char:FindFirstChildWhichIsA("BasePart")
    if not root then return end

    for i, trans in ipairs({0.6,0.75,0.85}) do
        local hl = Instance.new("Highlight")
        hl.Name = "GoldenOutline_"..i
        hl.Adornee = char
        hl.FillTransparency = trans
        hl.OutlineTransparency = (auraEnabled and 0 or 1)
        hl.OutlineColor = auraColor
        hl.FillColor = Color3.fromRGB(255 - (i*6), 210 - (i*4), 110)
        hl.Parent = char
        trackWorld(hl)
    end

    local mainLight = Instance.new("PointLight")
    mainLight.Name = "GoldLight"
    mainLight.Parent = root
    mainLight.Color = auraColor
    mainLight.Brightness = (auraEnabled and 3 or 0)
    mainLight.Range = 100
    mainLight.Shadows = false
    trackWorld(mainLight)

    local orbModel, visibleOrbs, fireOrbs = createOrbs(root)
    local startTime = tick()

    local moveConn
    moveConn = RunService.Heartbeat:Connect(function()
        if not objectsPresent then
            if moveConn and moveConn.Disconnect then moveConn:Disconnect() end
            return
        end
        local baseC = root.CFrame
        for idx, o in ipairs(visibleOrbs) do
            local ang = o.angle + (tick() - startTime) * orbSpeed
            local pos = baseC.Position + Vector3.new(math.cos(ang) * 15, o.height, math.sin(ang) * 15)
            if o.part and o.part.Parent then o.part.CFrame = CFrame.new(pos) end
        end
        for idx, f in ipairs(fireOrbs) do
            local ang = f.angle + (tick() - startTime) * orbSpeed
            local pos = baseC.Position + Vector3.new(math.cos(ang) * 30, f.height, math.sin(ang) * 30)
            if f.part and f.part.Parent then f.part.CFrame = CFrame.new(pos) end
        end
    end)
    trackWorldConn(moveConn)

    objectsPresent = true

    -- Orb brightness frame (keeps orb light brightness control separate)
    local bFrame = frame:FindFirstChild("BrightnessGUI")
    if not bFrame then
        bFrame = Instance.new("Frame")
        bFrame.Name = "BrightnessGUI"
        bFrame.Size = UDim2.new(0,120,0,140)
        bFrame.Position = UDim2.new(1, 10, 0, -100)
        bFrame.BackgroundColor3 = Color3.fromRGB(48,48,48)
        bFrame.BorderSizePixel = 0
        bFrame.Parent = frame
        trackUI(bFrame)

        local bClose = Instance.new("TextButton")
        bClose.Name = "B_Close"
        bClose.Size = UDim2.new(0,26,0,26)
        bClose.Position = UDim2.new(1,-30,0,6)
        bClose.Text = "X"
        bClose.TextScaled = true
        bClose.BackgroundColor3 = Color3.fromRGB(150,50,50)
        bClose.Parent = bFrame
        trackUI(bClose)
        bClose.MouseButton1Click:Connect(function() if bFrame and bFrame.Parent then bFrame:Destroy() end end)

        local bLabel = Instance.new("TextLabel")
        bLabel.Name = "B_Label"
        bLabel.Size = UDim2.new(1,-8,0,22)
        bLabel.Position = UDim2.new(0,4,0,6)
        bLabel.BackgroundTransparency = 1
        bLabel.TextColor3 = Color3.fromRGB(255,215,0)
        bLabel.TextScaled = true
        bLabel.Text = "Orb Bright: "..string.format("%.1f", orbBrightness)
        bLabel.Parent = bFrame
        trackUI(bLabel)

        local brightDown = Instance.new("TextButton")
        brightDown.Size = UDim2.new(0,36,0,28)
        brightDown.Position = UDim2.new(0,10,0,40)
        brightDown.Text = "‚àí"
        brightDown.Parent = bFrame
        trackUI(brightDown)

        local brightUp = Instance.new("TextButton")
        brightUp.Size = UDim2.new(0,36,0,28)
        brightUp.Position = UDim2.new(0,56,0,40)
        brightUp.Text = "+"
        brightUp.Parent = bFrame
        trackUI(brightUp)

        brightUp.MouseButton1Click:Connect(function()
            orbBrightness = math.clamp(orbBrightness + 0.2, 0, 10)
            bLabel.Text = "Orb Bright: "..string.format("%.1f", orbBrightness)
            applyOrbBrightness(getOrbModel(), orbBrightness)
        end)
        brightDown.MouseButton1Click:Connect(function()
            orbBrightness = math.clamp(orbBrightness - 0.2, 0, 10)
            bLabel.Text = "Orb Bright: "..string.format("%.1f", orbBrightness)
            applyOrbBrightness(getOrbModel(), orbBrightness)
        end)
    else
        bFrame.Visible = true
    end

    -- Orb speed & palette (cleaned & palette now has a white drag bar)
    local sFrame = frame:FindFirstChild("OrbSpeedGUI")
    if not sFrame then
        sFrame = Instance.new("Frame")
        sFrame.Name = "OrbSpeedGUI"
        sFrame.Size = UDim2.new(0,64,0,128)
        sFrame.Position = UDim2.new(1, 84, 0, -70)
        sFrame.BackgroundColor3 = Color3.fromRGB(48,48,48)
        sFrame.BorderSizePixel = 0
        sFrame.Parent = frame
        trackUI(sFrame)

        local sClose = Instance.new("TextButton")
        sClose.Name = "S_Close"
        sClose.Size = UDim2.new(0,26,0,26)
        sClose.Position = UDim2.new(0.5,-13,0,6)
        sClose.Text = "X"
        sClose.TextScaled = true
        sClose.BackgroundColor3 = Color3.fromRGB(150,50,50)
        sClose.Parent = sFrame
        trackUI(sClose)
        sClose.MouseButton1Click:Connect(function() if sFrame and sFrame.Parent then sFrame:Destroy() end end)

        local sUp = Instance.new("TextButton")
        sUp.Name = "S_Up"
        sUp.Size = UDim2.new(0,28,0,28)
        sUp.Position = UDim2.new(0.5,-14,0,40)
        sUp.Text = "‚¨ÜÔ∏è"
        sUp.TextScaled = true
        sUp.BackgroundColor3 = Color3.fromRGB(70,70,70)
        sUp.Parent = sFrame
        trackUI(sUp)

        local sDown = Instance.new("TextButton")
        sDown.Name = "S_Down"
        sDown.Size = UDim2.new(0,28,0,28)
        sDown.Position = UDim2.new(0.5,-14,0,74)
        sDown.Text = "‚¨áÔ∏è"
        sDown.TextScaled = true
        sDown.BackgroundColor3 = Color3.fromRGB(70,70,70)
        sDown.Parent = sFrame
        trackUI(sDown)

        local paletteBtn = Instance.new("TextButton")
        paletteBtn.Name = "S_Palette"
        paletteBtn.Size = UDim2.new(0,28,0,28)
        paletteBtn.Position = UDim2.new(0.5,-14,0,106)
        paletteBtn.Text = "üåà"
        paletteBtn.TextScaled = true
        paletteBtn.BackgroundColor3 = Color3.fromRGB(90,70,150)
        paletteBtn.Parent = sFrame
        trackUI(paletteBtn)

        local sLabel = Instance.new("TextLabel")
        sLabel.Name = "S_Label"
        sLabel.Size = UDim2.new(1,-8,0,22)
        sLabel.Position = UDim2.new(0,4,0,6)
        sLabel.BackgroundTransparency = 1
        sLabel.TextColor3 = Color3.fromRGB(0,200,255)
        sLabel.TextScaled = true
        sLabel.Text = "üåÄ "..string.format("%.2f", orbSpeed)
        sLabel.Parent = sFrame
        trackUI(sLabel)

        sUp.MouseButton1Click:Connect(function() orbSpeed = orbSpeed + 0.05; sLabel.Text = "üåÄ "..string.format("%.2f", orbSpeed) end)
        sDown.MouseButton1Click:Connect(function() orbSpeed = orbSpeed - 0.05; sLabel.Text = "üåÄ "..string.format("%.2f", orbSpeed) end)

        paletteBtn.MouseButton1Click:Connect(function()
            local existing = gui:FindFirstChild("ColorPalette")
            if existing then existing:Destroy() end

            local paletteFrame = Instance.new("Frame")
            paletteFrame.Name = "ColorPalette"
            paletteFrame.Size = UDim2.new(0,300,0,460)
            paletteFrame.BackgroundColor3 = Color3.fromRGB(36,36,36)
            paletteFrame.BorderSizePixel = 0
            paletteFrame.Parent = gui

            -- initial pos near main frame
            local mainAbsPos = frame.AbsolutePosition
            local mainAbsSize = frame.AbsoluteSize
            paletteFrame.Position = UDim2.new(0, math.clamp(mainAbsPos.X + mainAbsSize.X + 10, 20, Workspace.CurrentCamera.ViewportSize.X - 320), 0, math.clamp(mainAbsPos.Y - 120, 20, Workspace.CurrentCamera.ViewportSize.Y - 40))

            trackUI(paletteFrame)

            -- WHITE vertical drag bar on the LEFT side (visible) ‚Äî click & drag to move the palette anywhere
            local dragBar = Instance.new("Frame")
            dragBar.Name = "Palette_DragBar"
            dragBar.Size = UDim2.new(0,6,1,0)
            dragBar.Position = UDim2.new(0,0,0,0)
            dragBar.BackgroundColor3 = Color3.new(1,1,1)
            dragBar.BackgroundTransparency = 0.8
            dragBar.Parent = paletteFrame
            trackUI(dragBar)

            -- drag logic for the palette (uses the dragBar)
            do
                local dragging = false
                local dragStart = nil
                local startPos = nil
                local conn
                dragBar.InputBegan:Connect(function(input)
                    if input.UserInputType ~= Enum.UserInputType.MouseButton1 and input.UserInputType ~= Enum.UserInputType.Touch then return end
                    dragging = true
                    dragStart = UserInputService:GetMouseLocation()
                    startPos = paletteFrame.Position
                    input.Changed:Connect(function()
                        if input.UserInputState == Enum.UserInputState.End then
                            dragging = false
                        end
                    end)
                end)
                conn = RunService.RenderStepped:Connect(function()
                    if dragging and dragStart and startPos then
                        local mouse = UserInputService:GetMouseLocation()
                        local delta = mouse - dragStart
                        local newX = startPos.X.Offset + delta.X
                        local newY = startPos.Y.Offset + delta.Y
                        local vw = Workspace.CurrentCamera and Workspace.CurrentCamera.ViewportSize.X or 800
                        local vh = Workspace.CurrentCamera and Workspace.CurrentCamera.ViewportSize.Y or 600
                        newX = math.clamp(newX, -200, math.max(vw - paletteFrame.AbsoluteSize.X + 200, 0))
                        newY = math.clamp(newY, -200, math.max(vh - paletteFrame.AbsoluteSize.Y + 200, 0))
                        paletteFrame.Position = UDim2.new(0, newX, 0, newY)
                    end
                end)
                trackUI(conn)
            end

            local pClose = Instance.new("TextButton")
            pClose.Name = "P_Close"
            pClose.Size = UDim2.new(0,28,0,24)
            pClose.Position = UDim2.new(1,-34,0,6)
            pClose.Text = "X"
            pClose.TextScaled = true
            pClose.BackgroundColor3 = Color3.fromRGB(150,50,50)
            pClose.Parent = paletteFrame
            trackUI(pClose)
            -- CLOSE ONLY THE PALETTE (not the whole GUI)
            pClose.MouseButton1Click:Connect(function() if paletteFrame and paletteFrame.Parent then paletteFrame:Destroy() end end)

            local title = Instance.new("TextLabel")
            title.Size = UDim2.new(1,-44,0,22)
            title.Position = UDim2.new(0,8,0,6)
            title.BackgroundTransparency = 1
            title.TextColor3 = Color3.fromRGB(255,215,0)
            title.TextScaled = true
            title.Text = "Choose Orb / Fire / Aura Color"
            title.Parent = paletteFrame
            trackUI(title)

            -- MODE CAPTIONS (Choose Orb / Fire / Aura) - behave as mode selectors and turn green when active
            local modeContainer = Instance.new("Frame")
            modeContainer.Size = UDim2.new(1, -16, 0, 28)
            modeContainer.Position = UDim2.new(0,8,0,32)
            modeContainer.BackgroundTransparency = 1
            modeContainer.Parent = paletteFrame
            trackUI(modeContainer)

            local captionOrb = Instance.new("TextButton")
            captionOrb.Size = UDim2.new(0,88,1,0)
            captionOrb.Position = UDim2.new(0,0,0,0)
            captionOrb.Text = "Choose Orb"
            captionOrb.TextScaled = true
            captionOrb.BackgroundColor3 = Color3.fromRGB(60,60,60)
            captionOrb.TextColor3 = Color3.fromRGB(220,220,220)
            captionOrb.Parent = modeContainer
            trackUI(captionOrb)

            local captionFire = captionOrb:Clone()
            captionFire.Position = UDim2.new(0,92,0,0)
            captionFire.Text = "Fire Aura"
            captionFire.Parent = modeContainer
            trackUI(captionFire)

            local captionAura = captionOrb:Clone()
            captionAura.Position = UDim2.new(0,184,0,0)
            captionAura.Text = "Aura Color"
            captionAura.Parent = modeContainer
            trackUI(captionAura)

            -- mode handling
            local activeMode = "Orb" -- default
            local normalColor = Color3.fromRGB(60,60,60)
            local activeColor = Color3.fromRGB(80,220,80)
            local function setMode(m)
                activeMode = m
                captionOrb.BackgroundColor3 = (m == "Orb" and activeColor or normalColor)
                captionFire.BackgroundColor3 = (m == "Fire" and activeColor or normalColor)
                captionAura.BackgroundColor3 = (m == "Aura" and activeColor or normalColor)
            end
            setMode(activeMode)

            captionOrb.MouseButton1Click:Connect(function() setMode("Orb") end)
            captionFire.MouseButton1Click:Connect(function() setMode("Fire") end)
            captionAura.MouseButton1Click:Connect(function() setMode("Aura") end)

            -- COLOR GRID
            local scroll = Instance.new("ScrollingFrame")
            scroll.Name = "ColorScroll"
            scroll.Size = UDim2.new(1,-16,0,140)
            scroll.Position = UDim2.new(0,8,0,64)
            scroll.CanvasSize = UDim2.new(0,0,0,0)
            scroll.ScrollBarThickness = 10
            scroll.BackgroundTransparency = 1
            scroll.Parent = paletteFrame
            trackUI(scroll)

            local grid = Instance.new("UIGridLayout")
            grid.Parent = scroll
            grid.CellSize = UDim2.new(0,44,0,36)
            grid.CellPadding = UDim2.new(0,6,0,6)

            local colors = {
                {name="Red", color=Color3.fromRGB(255,80,80)},
                {name="Orange", color=Color3.fromRGB(255,140,60)},
                {name="Gold", color=Color3.fromRGB(205,165,80)},
                {name="Yellow", color=Color3.fromRGB(255,215,0)},
                {name="Green", color=Color3.fromRGB(120,200,120)},
                {name="Teal", color=Color3.fromRGB(0,200,180)},
                {name="Cyan", color=Color3.fromRGB(0,220,220)},
                {name="Blue", color=Color3.fromRGB(0,150,255)},
                {name="Indigo", color=Color3.fromRGB(90,90,255)},
                {name="Purple", color=Color3.fromRGB(160,100,255)},
                {name="Pink", color=Color3.fromRGB(255,140,200)},
                {name="Brown", color=Color3.fromRGB(150,100,60)},
                {name="White", color=Color3.fromRGB(240,240,240)},
                {name="Black", color=Color3.fromRGB(20,20,20)},
                {name="Lime", color=Color3.fromRGB(180,255,80)},
                {name="Magenta", color=Color3.fromRGB(255,80,200)},
                {name="Olive", color=Color3.fromRGB(154,163,42)},
                {name="Bronze", color=Color3.fromRGB(176,125,55)},
                {name="Champagne", color=Color3.fromRGB(247,231,206)},
                {name="Peach", color=Color3.fromRGB(255,204,153)},
                {name="Mint", color=Color3.fromRGB(170,255,210)},
                {name="Violet", color=Color3.fromRGB(200,160,255)},
                {name="Coral", color=Color3.fromRGB(255,127,80)},
                {name="WarmGold", color=Color3.fromRGB(255,200,120)},
                {name="Rainbow", color=nil},
            }

            local orbModelRef = getOrbModel()

            for _, entry in ipairs(colors) do
                local cb = Instance.new("TextButton")
                cb.Name = "Color_"..entry.name
                cb.Size = UDim2.new(0,44,0,36)
                cb.BackgroundColor3 = entry.color or Color3.fromRGB(180,100,240)
                cb.Text = entry.name:sub(1,2)
                cb.TextScaled = true
                cb.Parent = scroll
                trackUI(cb)

                cb.MouseButton1Click:Connect(function()
                    orbModelRef = getOrbModel()
                    -- rainbow handling depends on mode
                    if entry.name == "Rainbow" then
                        if activeMode == "Orb" then
                            if rainbowConn then
                                rainbowConn:Disconnect()
                                rainbowConn = nil
                                showCaption("üåà Rainbow orbs off")
                            else
                                rainbowConn = RunService.RenderStepped:Connect(function()
                                    if not objectsPresent then if rainbowConn then rainbowConn:Disconnect(); rainbowConn = nil end; return end
                                    local t = tick()
                                    local hue = (t * 0.18) % 1
                                    local col = Color3.fromHSV(hue, 0.95, 1)
                                    if orbModelRef then applyOrbColor(orbModelRef, col) end
                                end)
                                trackWorldConn(rainbowConn)
                                showCaption("üåà Rainbow orbs active")
                            end
                        elseif activeMode == "Fire" then
                            if fireRainbowConn then
                                pcall(function() fireRainbowConn:Disconnect() end)
                                fireRainbowConn = nil
                                showCaption("üî• Fire rainbow off")
                            else
                                local orbModelRefLocal = getOrbModel()
                                fireRainbowConn = RunService.RenderStepped:Connect(function()
                                    if not objectsPresent then
                                        if fireRainbowConn then fireRainbowConn:Disconnect(); fireRainbowConn = nil end
                                        return
                                    end
                                    if not orbModelRefLocal then orbModelRefLocal = getOrbModel() end
                                    if orbModelRefLocal then
                                        local t = tick()
                                        local idx = 0
                                        for _, part in ipairs(orbModelRefLocal:GetDescendants()) do
                                            if part:IsA("Fire") and part.Name == "GoldenFire" then
                                                idx = idx + 1
                                                local hue = (t * 0.28 + (idx * 0.08)) % 1
                                                local col = Color3.fromHSV(hue, 0.95, 1)
                                                pcall(function()
                                                    part.Color = col
                                                    part.SecondaryColor = col
                                                end)
                                            end
                                        end
                                    end
                                end)
                                trackWorldConn(fireRainbowConn)
                                showCaption("üî• Fire rainbow active")
                            end
                        elseif activeMode == "Aura" then
                            if auraRainbowConn then
                                pcall(function() auraRainbowConn:Disconnect() end)
                                auraRainbowConn = nil
                                showCaption("‚ú® Aura rainbow off")
                            else
                                auraRainbowConn = RunService.RenderStepped:Connect(function()
                                    if not auraEnabled or not player.Character then
                                        if auraRainbowConn then auraRainbowConn:Disconnect(); auraRainbowConn = nil end
                                        return
                                    end
                                    local hue = (tick() * 0.12) % 1
                                    local ccol = Color3.fromHSV(hue, 0.95, 1)
                                    auraColor = ccol
                                    applyAuraSettingsToCharacter(player.Character, auraColor, auraEnabled)
                                    local root = player.Character:FindFirstChild("HumanoidRootPart") or player.Character:FindFirstChildWhichIsA("BasePart")
                                    if root then
                                        local gl = root:FindFirstChild("GoldLight")
                                        if gl and gl:IsA("PointLight") then gl.Color = auraColor end
                                    end
                                end)
                                trackWorldConn(auraRainbowConn)
                                showCaption("‚ú® Aura rainbow active")
                            end
                        end
                        return
                    end

                    -- non-rainbow colors: apply based on activeMode then revert caption visuals
                    if activeMode == "Orb" then
                        orbColor = entry.color
                        if orbModelRef then applyOrbColor(orbModelRef, orbColor) end
                        showCaption("Orb color set: "..entry.name)
                    elseif activeMode == "Fire" then
                        fireColor = entry.color
                        applyFireSettingsToAll(orbModelRef, fireColor, fireSaturation, fireSize, fireHeat)
                        showCaption("Fire color set: "..entry.name)
                    elseif activeMode == "Aura" then
                        auraColor = entry.color
                        if player.Character then applyAuraSettingsToCharacter(player.Character, auraColor, auraEnabled) end
                        showCaption("Aura color set: "..entry.name)
                    end

                    -- reset caption highlight to normal after selection
                    setMode("") -- clears highlights
                    -- small delay then set default mode back to Orb
                    task.delay(0.12, function() setMode("Orb") end)
                end)
            end

            grid:GetPropertyChangedSignal("AbsoluteContentSize"):Connect(function()
                scroll.CanvasSize = UDim2.new(0, 0, 0, grid.AbsoluteContentSize.Y)
            end)
            task.defer(function() scroll.CanvasSize = UDim2.new(0, 0, 0, grid.AbsoluteContentSize.Y) end)

            -- FIRE Controls (kept, but removed extra visible small drag icons)
            local fireLabel = Instance.new("TextLabel")
            fireLabel.Size = UDim2.new(1,-16,0,18)
            fireLabel.Position = UDim2.new(0,8,0,214)
            fireLabel.BackgroundTransparency = 1
            fireLabel.TextColor3 = Color3.fromRGB(255,180,80)
            fireLabel.TextScaled = true
            fireLabel.Text = "üî• Fire Controls"
            fireLabel.Parent = paletteFrame
            trackUI(fireLabel)

            -- SATURATION / HEAT / toggles...
            local satDown = Instance.new("TextButton")
            satDown.Size = UDim2.new(0,28,0,22)
            satDown.Position = UDim2.new(0,92,0,238)
            satDown.Text = "‚àí"
            satDown.Parent = paletteFrame
            trackUI(satDown)

            local satUp = satDown:Clone()
            satUp.Position = UDim2.new(0,124,0,238); satUp.Text = "+"; satUp.Parent = paletteFrame; trackUI(satUp)

            local satLabel = Instance.new("TextLabel")
            satLabel.Size = UDim2.new(0,80,0,22)
            satLabel.Position = UDim2.new(0,156,0,238)
            satLabel.BackgroundTransparency = 1
            satLabel.TextColor3 = Color3.fromRGB(220,220,220)
            satLabel.TextScaled = true
            satLabel.Text = "Sat: "..tostring(fireSaturation)
            satLabel.Parent = paletteFrame
            trackUI(satLabel)

            local heatDown = Instance.new("TextButton")
            heatDown.Size = UDim2.new(0,28,0,22)
            heatDown.Position = UDim2.new(0,8,0,238)
            heatDown.Text = "‚àí"
            heatDown.Parent = paletteFrame
            trackUI(heatDown)

            local heatUp = heatDown:Clone()
            heatUp.Position = UDim2.new(0,40,0,238); heatUp.Text = "+"; heatUp.Parent = paletteFrame; trackUI(heatUp)

            local heatLabel = Instance.new("TextLabel")
            heatLabel.Size = UDim2.new(0,80,0,22)
            heatLabel.Position = UDim2.new(0,44,0,214)
            heatLabel.BackgroundTransparency = 1
            heatLabel.TextColor3 = Color3.fromRGB(220,220,220)
            heatLabel.TextScaled = true
            heatLabel.Text = "Heat: "..tostring(fireHeat)
            heatLabel.Parent = paletteFrame
            trackUI(heatLabel)

            heatUp.MouseButton1Click:Connect(function()
                fireHeat = math.clamp(fireHeat + 1, 1, 40)
                heatLabel.Text = "Heat: "..tostring(fireHeat)
                applyFireSettingsToAll(getOrbModel(), fireColor, fireSaturation, fireSize, fireHeat)
            end)
            heatDown.MouseButton1Click:Connect(function()
                fireHeat = math.clamp(fireHeat - 1, 1, 40)
                heatLabel.Text = "Heat: "..tostring(fireHeat)
                applyFireSettingsToAll(getOrbModel(), fireColor, fireSaturation, fireSize, fireHeat)
            end)

            satUp.MouseButton1Click:Connect(function()
                fireSaturation = math.clamp(fireSaturation + 5, 0, 100)
                satLabel.Text = "Sat: "..tostring(fireSaturation)
                applyFireSettingsToAll(getOrbModel(), fireColor, fireSaturation, fireSize, fireHeat)
            end)
            satDown.MouseButton1Click:Connect(function()
                fireSaturation = math.clamp(fireSaturation - 5, 0, 100)
                satLabel.Text = "Sat: "..tostring(fireSaturation)
                applyFireSettingsToAll(getOrbModel(), fireColor, fireSaturation, fireSize, fireHeat)
            end)

            local fireToggle = Instance.new("TextButton")
            fireToggle.Name = "Fire_Toggle"
            fireToggle.Size = UDim2.new(0,64,0,28)
            fireToggle.Position = UDim2.new(0,36,0,270)
            fireToggle.Text = (fireEnabled and "On" or "Off")
            fireToggle.BackgroundColor3 = Color3.fromRGB(120,60,20)
            fireToggle.Parent = paletteFrame
            trackUI(fireToggle)

            local fireRainbowToggle = Instance.new("TextButton")
            fireRainbowToggle.Name = "Fire_Rainbow"
            fireRainbowToggle.Size = UDim2.new(0,96,0,28)
            fireRainbowToggle.Position = UDim2.new(0,108,0,270)
            fireRainbowToggle.Text = "Fire Rainbow"
            fireRainbowToggle.BackgroundColor3 = Color3.fromRGB(120,90,20)
            fireRainbowToggle.Parent = paletteFrame
            trackUI(fireRainbowToggle)

            local orbsSmallToggle = Instance.new("TextButton")
            orbsSmallToggle.Name = "Orbs_Small"
            orbsSmallToggle.Size = UDim2.new(0,56,0,28)
            orbsSmallToggle.Position = UDim2.new(0,212,0,270)
            orbsSmallToggle.Text = (orbsVisible and "‚òÄÔ∏è" or "üåë")
            orbsSmallToggle.TextScaled = true
            orbsSmallToggle.BackgroundColor3 = Color3.fromRGB(90,90,90)
            orbsSmallToggle.Parent = paletteFrame
            trackUI(orbsSmallToggle)

            orbsSmallToggle.MouseButton1Click:Connect(function()
                orbsVisible = not orbsVisible
                orbsSmallToggle.Text = (orbsVisible and "‚òÄÔ∏è" or "üåë")
                local orbModel = getOrbModel()
                if orbModel then
                    for _, p in ipairs(orbModel:GetDescendants()) do
                        if p:IsA("Part") and p.Name:match("^GoldenOrb_") then
                            p.Transparency = (orbsVisible and 0 or 1)
                            local pl = p:FindFirstChild("OrbLight")
                            if pl then pl.Enabled = orbsVisible end
                        end
                    end
                end
            end)

            fireToggle.MouseButton1Click:Connect(function()
                fireEnabled = not fireEnabled
                fireToggle.Text = (fireEnabled and "On" or "Off")
                applyFireSettingsToAll(getOrbModel(), fireColor, fireSaturation, fireSize, fireHeat)
                showCaption("üî• Fire "..(fireEnabled and "enabled" or "disabled"))
            end)

            fireRainbowToggle.MouseButton1Click:Connect(function()
                if fireRainbowConn then
                    pcall(function() fireRainbowConn:Disconnect() end)
                    fireRainbowConn = nil
                    showCaption("üî• Fire rainbow off")
                else
                    local orbModelRefLocal = getOrbModel()
                    fireRainbowConn = RunService.RenderStepped:Connect(function()
                        if not objectsPresent then
                            if fireRainbowConn then fireRainbowConn:Disconnect(); fireRainbowConn = nil end
                            return
                        end
                        if not orbModelRefLocal then orbModelRefLocal = getOrbModel() end
                        if orbModelRefLocal then
                            local t = tick()
                            local idx = 0
                            for _, part in ipairs(orbModelRefLocal:GetDescendants()) do
                                if part:IsA("Fire") and part.Name == "GoldenFire" then
                                    idx = idx + 1
                                    local hue = (t * 0.28 + (idx * 0.08)) % 1
                                    local col = Color3.fromHSV(hue, 0.95, 1)
                                    pcall(function()
                                        part.Color = col
                                        part.SecondaryColor = col
                                    end)
                                end
                            end
                        end
                    end)
                    trackWorldConn(fireRainbowConn)
                    showCaption("üî• Fire rainbow active")
                end
            end)

            -- Fire swatches placed earlier; now add Main Light Brightness + Range under the on/off block
            local mainLabel = Instance.new("TextLabel")
            mainLabel.Size = UDim2.new(1,-16,0,18)
            mainLabel.Position = UDim2.new(0,8,0,310)
            mainLabel.BackgroundTransparency = 1
            mainLabel.TextColor3 = Color3.fromRGB(255,215,0)
            mainLabel.TextScaled = true
            mainLabel.Text = "üí° Main Light Controls"
            mainLabel.Parent = paletteFrame
            trackUI(mainLabel)

            -- Main light brightness
            local mainBrightLabel = Instance.new("TextLabel")
            mainBrightLabel.Size = UDim2.new(0,140,0,22)
            mainBrightLabel.Position = UDim2.new(0,8,0,338)
            mainBrightLabel.BackgroundTransparency = 1
            mainBrightLabel.TextColor3 = Color3.fromRGB(220,220,220)
            mainBrightLabel.TextScaled = true
            mainBrightLabel.Text = "Brightness: --"
            mainBrightLabel.Parent = paletteFrame
            trackUI(mainBrightLabel)

            local mainBrightDown = Instance.new("TextButton")
            mainBrightDown.Size = UDim2.new(0,28,0,22)
            mainBrightDown.Position = UDim2.new(0,156,0,338)
            mainBrightDown.Text = "‚àí"
            mainBrightDown.Parent = paletteFrame
            trackUI(mainBrightDown)

            local mainBrightUp = mainBrightDown:Clone()
            mainBrightUp.Position = UDim2.new(0,192,0,338); mainBrightUp.Text = "+"; mainBrightUp.Parent = paletteFrame; trackUI(mainBrightUp)

            -- Main light range
            local mainRangeLabel = Instance.new("TextLabel")
            mainRangeLabel.Size = UDim2.new(0,140,0,22)
            mainRangeLabel.Position = UDim2.new(0,8,0,366)
            mainRangeLabel.BackgroundTransparency = 1
            mainRangeLabel.TextColor3 = Color3.fromRGB(220,220,220)
            mainRangeLabel.TextScaled = true
            mainRangeLabel.Text = "Range: --"
            mainRangeLabel.Parent = paletteFrame
            trackUI(mainRangeLabel)

            local mainRangeDown = Instance.new("TextButton")
            mainRangeDown.Size = UDim2.new(0,28,0,22)
            mainRangeDown.Position = UDim2.new(0,156,0,366)
            mainRangeDown.Text = "‚àí"
            mainRangeDown.Parent = paletteFrame
            trackUI(mainRangeDown)

            local mainRangeUp = mainRangeDown:Clone()
            mainRangeUp.Position = UDim2.new(0,192,0,366); mainRangeUp.Text = "+"; mainRangeUp.Parent = paletteFrame; trackUI(mainRangeUp)

            -- helper to refresh main light labels (safe)
            local function refreshMainLightLabels()
                local ml = getMainLight()
                if ml and ml.Parent then
                    mainBrightLabel.Text = "Brightness: "..string.format("%.1f", ml.Brightness)
                    mainRangeLabel.Text = "Range: "..tostring(math.floor(ml.Range))
                else
                    mainBrightLabel.Text = "Brightness: (none)"
                    mainRangeLabel.Text = "Range: (none)"
                end
            end

            -- Connect buttons to main light (clamped)
            mainBrightUp.MouseButton1Click:Connect(function()
                local ml = getMainLight()
                if ml then
                    ml.Brightness = math.clamp((ml.Brightness or 0) + 1, 0, 100)
                    refreshMainLightLabels()
                end
            end)
            mainBrightDown.MouseButton1Click:Connect(function()
                local ml = getMainLight()
                if ml then
                    ml.Brightness = math.clamp((ml.Brightness or 0) - 1, 0, 100)
                    refreshMainLightLabels()
                end
            end)
            mainRangeUp.MouseButton1Click:Connect(function()
                local ml = getMainLight()
                if ml then
                    ml.Range = math.clamp((ml.Range or 0) + 10, 0, 1000)
                    refreshMainLightLabels()
                end
            end)
            mainRangeDown.MouseButton1Click:Connect(function()
                local ml = getMainLight()
                if ml then
                    ml.Range = math.clamp((ml.Range or 0) - 10, 0, 1000)
                    refreshMainLightLabels()
                end
            end)

            -- refresh labels every frame while palette open to show live values
            local refreshConn = RunService.RenderStepped:Connect(function()
                if not paletteFrame or not paletteFrame.Parent then
                    if refreshConn then refreshConn:Disconnect(); refreshConn = nil end
                    return
                end
                refreshMainLightLabels()
            end)
            trackUI(refreshConn)

            -- end palette creation
        end)
        trackUI(paletteBtn)
    else
        sFrame.Visible = true
    end
end

-- ensure no duplicate mini toggles left over and create the main container/button
local function createContainer()
    -- remove any stale duplicates inside container area
    local stale = {"OrbsMiniToggle"}
    for _, n in ipairs(stale) do
        pcall(function()
            local f = abilityScrollFrame:FindFirstChild("GoldenAuraContainer")
            if f then
                local child = f:FindFirstChild(n)
                if child then child:Destroy() end
            end
        end)
    end

    local container = abilityScrollFrame:FindFirstChild("GoldenAuraContainer") or Instance.new("Frame")
    if not container.Parent then
        container.Name = "GoldenAuraContainer"
        container.Size = UDim2.new(1, -8, 0, 56)
        container.BackgroundTransparency = 1
        container.LayoutOrder = 1
        container.Parent = abilityScrollFrame
    end
    container.ClipsDescendants = true
    trackUI(container)

    local auraBtn = container:FindFirstChild("GoldenAuraButton") or Instance.new("TextButton")
    if not auraBtn.Parent then
        auraBtn.Name = "GoldenAuraButton"
        auraBtn.Size = UDim2.new(1, 0, 1, 0)
        auraBtn.BackgroundColor3 = Color3.fromRGB(205,165,80)
        auraBtn.TextColor3 = Color3.new(0,0,0)
        auraBtn.TextScaled = true
        auraBtn.Text = "Golden Aura (Off)"
        auraBtn.BorderSizePixel = 0
        auraBtn.Parent = container
    end
    auraBtn.ZIndex = 10
    trackUI(auraBtn)

    -- small orbs toggle moved left a bit so it won't sit on top
    local orbsMini = container:FindFirstChild("OrbsMiniToggle")
    if not orbsMini then
        orbsMini = Instance.new("TextButton")
        orbsMini.Name = "OrbsMiniToggle"
        orbsMini.Size = UDim2.new(0,44,0,28)
        orbsMini.AnchorPoint = Vector2.new(1,0)
        orbsMini.Position = UDim2.new(1, -56, 0, 4) -- moved left slightly to avoid overlapping
        orbsMini.Text = (orbsVisible and "‚òÄÔ∏è" or "üåë")
        orbsMini.TextScaled = true
        orbsMini.BackgroundColor3 = Color3.fromRGB(90,90,90)
        orbsMini.Parent = container
        trackUI(orbsMini)

        orbsMini.MouseButton1Click:Connect(function()
            orbsVisible = not orbsVisible
            orbsMini.Text = (orbsVisible and "‚òÄÔ∏è" or "üåë")
            local orbModel = getOrbModel()
            if orbModel then
                for _, p in ipairs(orbModel:GetDescendants()) do
                    if p:IsA("Part") and p.Name:match("^GoldenOrb_") then
                        p.Transparency = (orbsVisible and 0 or 1)
                        local pl = p:FindFirstChild("OrbLight")
                        if pl then pl.Enabled = orbsVisible end
                    end
                end
            end
        end)
    end
    trackUI(orbsMini)

    auraBtn.MouseButton1Click:Connect(function()
        if auraActive then
            auraActive = false
            clearWorld()
            removeWorkspaceOrbs()
            if rainbowConn then pcall(function() rainbowConn:Disconnect() end); rainbowConn = nil end
            if fireRainbowConn then pcall(function() fireRainbowConn:Disconnect() end); fireRainbowConn = nil end
            if auraRainbowConn then pcall(function() auraRainbowConn:Disconnect() end); auraRainbowConn = nil end
            auraBtn.BackgroundColor3 = Color3.fromRGB(205,165,80)
            auraBtn.Text = "Golden Aura (Off)"
            showCaption("üü• Golden Aura Off")
        else
            auraActive = true
            objectsPresent = false
            clearWorld()
            if player.Character then createAuraForCharacter(player.Character) end
            auraBtn.BackgroundColor3 = Color3.fromRGB(255,230,120)
            auraBtn.Text = "Golden Aura (On)"
            showCaption("üü® Golden Aura On")
        end
    end)
end

-- init
createContainer()
makeDraggableTop(caption)

player.CharacterAdded:Connect(function(char)
    clearWorld()
    if auraActive then
        task.delay(0.05, function() if auraActive then createAuraForCharacter(char) end end)
    end
end)

Players.PlayerRemoving:Connect(function(plr)
    if plr == player then
        clearWorld()
        removeWorkspaceOrbs()
        clearUI()
    end
end)
